{"version":3,"sources":["_common/_module.js","_common/helpers/route.helper.js","_common/helpers/modal.helper.js","_common/helpers/config.helper.js","_common/filters/numberfixedlen.js","_common/filters/fromnow.js","_common/filters/fileicon.js","_common/filters/bytes.js","_common/directives/ngprint.js","_common/directives/errsrc.js","_common/configs/permission.config.js","app.min.js","_common/configs/location.config.js","_common/configs/http.config.js","_common/configs/google-analytics.config.js","settings/_module.js","settings/overview/controller.js","participants/_module.js","participants/overview/controller.js","participants/form/controller.js","lotteries/_module.js","lotteries/overview/controller.js","lotteries/lottery/controller.js","lotteries/init/controller.js","auth/_module.js","auth/login/controller.js","_common/routes.js","settings/service.js","settings/routes.js","participants/service.js","participants/routes.js","participants/modals.js","lotteries/service.js","lotteries/routes.js","lotteries/modals.js","auth/service.js","auth/routes.js","auth/interceptor.js","auth/constants.js","app.js","run.js","bootstrap.js"],"names":["angular","module","routerHelperProvider","$locationProvider","$stateProvider","$urlRouterProvider","RouterHelper","$state","configureStates","states","otherwisePath","forEach","state","config","controllerAs","extend","views","_","each","item","hasOtherwise","otherwise","getStates","get","service","this","$get","$inject","provider","modalHelperProvider","modalHelper","$uibModal","$q","toaster","configureModals","modals","_ret","modal","obj","ModalResultComplete","response","ModalResultFailed","reason","reject","resolve","ModalParams","open","result","then","configHelperProvider","ConfigHelper","notifyConfig","configName","message","console","log","numberFixedLen","a","b","slice","filter","fromNow","date","moment","fileicon","_icons","application/pdf","application/powerpoint","application/x-msword","application/x-msexcel","application/x-mspowerpoint","audio/x-mpeg-3","image/gif","image/png","image/tiff","image/jpeg","video/avi","video/mpeg","video/msvideo","video/quicktime","application/zip","bytes","precision","isNaN","parseFloat","isFinite","units","number","Math","floor","pow","toFixed","ngPrint","link","scope","element","attrs","on","elemToPrint","document","getElementById","printElementId","printElement","beforePrint","afterPrint","printSection","innerHTML","window","matchMedia","mediaQueryList","addListener","mql","matches","onbeforeprint","onafterprint","elem","domClone","cloneNode","appendChild","print","createElement","id","body","restrict","directive","errSrc","ngSrc","$set","bind","remove","src","PermissionsConfig","configHelper","Permission","AuthService","defineRole","AuthObj","run","LocationConfig","html5Mode","$httpProvider","defaults","withCredentials","AnalyticsConfig","AnalyticsProvider","GoogleTrackCode","setAccount","trackUrlParams","ignoreFirstPageLoad","setPageEvent","SettingsController","SettingsService","activate","controller","ParticipantsController","ParticipantsService","ParticipantsModals","vm","LoadPLists","loading","GetPLists","data","PLists","AddPList","PListForm","ViewPList","PList","ID","_id","DeletePList","PListFormController","$modalInstance","GetPList","Participants","length","AddParticipants","i","push","RemoveParticipant","index","splice","Save","SavePList","close","LotteriesController","LotteriesService","LotteriesModals","LoadLotteries","HasPages","FetchPrevious","Previous","PreviousPage","FetchNext","Next","NextPage","GetLotteries","Lotteries","AddLottery","LotteryInit","go","DeleteLottery","lottery","LotteryController","$stateParams","LoadLottery","GetLottery","Lottery","LotteryInitController","SaveLottery","resp","Name","random","AuthLoginController","LoginMessages","ref","Alert","UNAUTHORIZED","SIGNOUT","REGISTERED","SignIn","credentials","rejection","error","toUpperCase","RoutesConfig","routerHelper","_states","map","_state","abstract","templateUrl","$scope","username","$resource","GetSettings","params","APP","Service","$promise","chain","rows","value","sortBy","DrewAt","reverse","GetSetting","SaveSetting","Setting","Type","save","DeleteSetting","_deleted","DeletedAt","Date","factory","appRun","url","permissions","except","redirectTo","CreatedAt","Email","template","getModals","size","backdrop","_offset","_limit","_total","limit","skip","total_rows","shuffle","$http","$cookies","Init","getObject","isAuth","deferred","defer","post","CouchServer","name","password","IsSignIn","putObject","promise","SignOut","only","AuthInterceptor","$injector","responseError","status","AuthInterceptorConfig","interceptors","constant","ANAUTHORIZED","Message","Details","AUTHERROR","UNAVAILABLE","$rootScope","$on","evt","to","preventDefault","_domain","location","hostname","split","shift","Project","Version","Domain","Database","ready","bootstrap"],"mappings":"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","file":"app.min.js","sourcesContent":["(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common', [\r\n      'angular-google-analytics',\r\n      'ngResource',\r\n      'ngSanitize',\r\n      'ngCookies',\r\n      'permission',\r\n      'toaster',\r\n      'ui.bootstrap',\r\n      'ui.router',\r\n    ]);\r\n})();\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('routerHelper', routerHelperProvider);\r\n\r\n  routerHelperProvider.$inject = ['$locationProvider', '$stateProvider', '$urlRouterProvider'];\r\n  /* @ngInject */\r\n  function routerHelperProvider($locationProvider, $stateProvider, $urlRouterProvider) {\r\n    /* jshint validthis:true */\r\n    this.$get = RouterHelper;\r\n\r\n    // $locationProvider.html5Mode(true);\r\n\r\n    RouterHelper.$inject = ['$state'];\r\n\r\n    function RouterHelper($state) {\r\n      var hasOtherwise = false;\r\n\r\n      var service = {\r\n        configureStates: configureStates,\r\n        getStates: getStates\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureStates(states, otherwisePath) {\r\n        states.forEach(function(state) {\r\n\r\n          var config = {\r\n            controllerAs: 'vm',\r\n          };\r\n\r\n          angular.extend(config, state.config);\r\n\r\n          if (config.views) {\r\n            _.each(config.views, function(item) {\r\n              item.controllerAs = 'vm';\r\n            });\r\n          }\r\n\r\n          $stateProvider.state(state.state, config);\r\n        });\r\n        if (otherwisePath && !hasOtherwise) {\r\n          hasOtherwise = true;\r\n          $urlRouterProvider.otherwise(otherwisePath);\r\n        }\r\n      }\r\n\r\n      function getStates() {\r\n        return $state.get();\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('modalHelper', modalHelperProvider);\r\n\r\n  modalHelperProvider.$inject = [];\r\n  /* @ngInject */\r\n  function modalHelperProvider() {\r\n    /* jshint validthis:true */\r\n    this.$get = modalHelper;\r\n\r\n    modalHelper.$inject = ['$uibModal', '$q', 'toaster'];\r\n\r\n    function modalHelper($uibModal, $q, toaster) {\r\n\r\n      var service = {\r\n        configureModals: configureModals\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureModals(modals) {\r\n        var _ret = {};\r\n        angular.forEach(modals, function(modal) {\r\n          _ret[modal.modal] = function(obj) {\r\n            var config = {\r\n              controllerAs: 'vm',\r\n              resolve: {\r\n                ModalParams: function() {\r\n                  return obj || {};\r\n                }\r\n              }\r\n            };\r\n            angular.extend(config, modal.config);\r\n\r\n            return $uibModal\r\n              .open(config)\r\n              .result\r\n              .then(ModalResultComplete)\r\n              .catch(ModalResultFailed);\r\n\r\n            function ModalResultComplete(response) {\r\n              return response;\r\n            }\r\n\r\n            function ModalResultFailed(reason) {\r\n              if (reason && reason !== \"backdrop click\") {\r\n                return $q.reject();\r\n              }\r\n            }\r\n          };\r\n        });\r\n        return _ret;\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('configHelper', configHelperProvider);\r\n\r\n  configHelperProvider.$inject = [];\r\n\r\n  function configHelperProvider() {\r\n    /* jshint validthis:true */\r\n    this.$get = ConfigHelper;\r\n\r\n    // $locationProvider.html5Mode(true);\r\n\r\n    ConfigHelper.$inject = [];\r\n\r\n    function ConfigHelper() {\r\n\r\n      var service = {\r\n        notifyConfig: notifyConfig\r\n      };\r\n\r\n      return service;\r\n\r\n      //function notifyConfig() {}\r\n      function notifyConfig(configName, message) {\r\n        message = message || {};\r\n        console.log(\"%c CONFIG - \" + configName + \" \", 'background: #9C27B0; color: #FFF', message);\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('numberFixedLen', numberFixedLen)\r\n\r\n  numberFixedLen.$inject = []\r\n\r\n  function numberFixedLen() {\r\n    return function(a, b) {\r\n      return (1e4 + a + \"\").slice(-b)\r\n    }\r\n  }\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('fromNow', fromNow)\r\n\r\n  fromNow.$inject = []\r\n\r\n  function fromNow() {\r\n    return function(date) {\r\n      return moment(date).fromNow();\r\n    }\r\n  }\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('fileicon', fileicon)\r\n\r\n  fileicon.$inject = []\r\n\r\n  function fileicon() {\r\n    var _icons = {\r\n      \"application/pdf\": \"fa-file-pdf-o\",\r\n      \"application/powerpoint\": \"fa-file-powerpoint-o\",\r\n      \"application/x-msword\": \"fa-file-word-o\",\r\n      \"application/x-msexcel\": \"fa-file-excel-o\",\r\n      \"application/x-mspowerpoint\": \"fa-file-powerpoint-o\",\r\n      \"audio/x-mpeg-3\": \"fa-file-audio-o\",\r\n      \"image/gif\": \"fa-file-image-o\",\r\n      \"image/png\": \"fa-file-image-o\",\r\n      \"image/tiff\": \"fa-file-image-o\",\r\n      \"image/jpeg\": \"fa-file-image-o\",\r\n      \"video/avi\": \"fa-file-video-o\",\r\n      \"video/mpeg\": \"fa-file-video-o\",\r\n      \"video/msvideo\": \"fa-file-video-o\",\r\n      \"video/quicktime\": \"fa-file-video-o\",\r\n      \"application/zip\": \"fa-file-zip-o\"\r\n    };\r\n    return function(a) {\r\n      return _icons[a] || \"fa-file-o\";\r\n    }\r\n  }\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('bytes', bytes)\r\n\r\n  bytes.$inject = []\r\n\r\n  function bytes() {\r\n    return function(bytes, precision) {\r\n      if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) return '-';\r\n      if (typeof precision === 'undefined') precision = 1;\r\n      var units = ['bytes', 'kB', 'MB', 'GB', 'TB', 'PB'],\r\n        number = Math.floor(Math.log(bytes) / Math.log(1024));\r\n      return (bytes / Math.pow(1024, Math.floor(number))).toFixed(precision) + ' ' + units[number];\r\n    }\r\n  }\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngPrint', ngPrint)\r\n\r\n  ngPrint.$inject = []\r\n\r\n  function ngPrint() {\r\n    var printSection = document.getElementById('printSection');\r\n    // if there is no printing section, create one\r\n    if (!printSection) {\r\n      printSection = document.createElement('div');\r\n      printSection.id = 'printSection';\r\n      document.body.appendChild(printSection);\r\n    }\r\n\r\n    function link(scope, element, attrs) {\r\n\r\n      element.on('click', function() {\r\n        var elemToPrint = document.getElementById(attrs.printElementId);\r\n        if (elemToPrint) {\r\n          printElement(elemToPrint);\r\n        }\r\n      });\r\n\r\n      var beforePrint = function() {\r\n        console.log('Functionality to run before printing.');\r\n      };\r\n      var afterPrint = function() {\r\n        console.log('Functionality to run after printing');\r\n          printSection.innerHTML = '';\r\n      };\r\n\r\n      if (window.matchMedia) {\r\n        var mediaQueryList = window.matchMedia('print');\r\n        mediaQueryList.addListener(function(mql) {\r\n          if (mql.matches) {\r\n            beforePrint();\r\n          } else {\r\n            afterPrint();\r\n          }\r\n        });\r\n      }\r\n\r\n      window.onbeforeprint = beforePrint;\r\n      window.onafterprint = afterPrint;\r\n\r\n    }\r\n\r\n    function printElement(elem) {\r\n      // clones the element you want to print\r\n      var domClone = elem.cloneNode(true);\r\n      printSection.appendChild(domClone);\r\n      window.print();\r\n    }\r\n    return {\r\n      link: link,\r\n      restrict: 'A'\r\n    };\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('errSrc', errSrc)\r\n\r\n  errSrc.$inject = []\r\n\r\n  function errSrc() {\r\n    return {\r\n      link: function(scope, element, attrs) {\r\n        if(!attrs.ngSrc){\r\n          attrs.$set('src', attrs.errSrc);\r\n        }\r\n\r\n        element.bind('error', function() {\r\n\r\n          if (attrs.errSrc == \"REMOVE\") {\r\n            element.remove();\r\n            return;\r\n          }\r\n          if (attrs.src != attrs.errSrc) {\r\n            attrs.$set('src', attrs.errSrc);\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .run(PermissionsConfig);\r\n\r\n  /* @ngInject */\r\n  function PermissionsConfig(configHelper, Permission, AuthService) {\r\n\r\n    Permission.defineRole('Anonymous', function() {\r\n      return !AuthService.AuthObj;\r\n    });\r\n\r\n    configHelper.notifyConfig(\"Permissions\", \"Loaded\");\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common', [\r\n      'angular-google-analytics',\r\n      'ngResource',\r\n      'ngSanitize',\r\n      'ngCookies',\r\n      'permission',\r\n      'toaster',\r\n      'ui.bootstrap',\r\n      'ui.router',\r\n    ]);\r\n})();\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('routerHelper', routerHelperProvider);\r\n\r\n  routerHelperProvider.$inject = ['$locationProvider', '$stateProvider', '$urlRouterProvider'];\r\n  /* @ngInject */\r\n  function routerHelperProvider($locationProvider, $stateProvider, $urlRouterProvider) {\r\n    /* jshint validthis:true */\r\n    this.$get = RouterHelper;\r\n\r\n    // $locationProvider.html5Mode(true);\r\n\r\n    RouterHelper.$inject = ['$state'];\r\n\r\n    function RouterHelper($state) {\r\n      var hasOtherwise = false;\r\n\r\n      var service = {\r\n        configureStates: configureStates,\r\n        getStates: getStates\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureStates(states, otherwisePath) {\r\n        states.forEach(function(state) {\r\n\r\n          var config = {\r\n            controllerAs: 'vm',\r\n          };\r\n\r\n          angular.extend(config, state.config);\r\n\r\n          if (config.views) {\r\n            _.each(config.views, function(item) {\r\n              item.controllerAs = 'vm';\r\n            });\r\n          }\r\n\r\n          $stateProvider.state(state.state, config);\r\n        });\r\n        if (otherwisePath && !hasOtherwise) {\r\n          hasOtherwise = true;\r\n          $urlRouterProvider.otherwise(otherwisePath);\r\n        }\r\n      }\r\n\r\n      function getStates() {\r\n        return $state.get();\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('modalHelper', modalHelperProvider);\r\n\r\n  modalHelperProvider.$inject = [];\r\n  /* @ngInject */\r\n  function modalHelperProvider() {\r\n    /* jshint validthis:true */\r\n    this.$get = modalHelper;\r\n\r\n    modalHelper.$inject = ['$uibModal', '$q', 'toaster'];\r\n\r\n    function modalHelper($uibModal, $q, toaster) {\r\n\r\n      var service = {\r\n        configureModals: configureModals\r\n      };\r\n\r\n      return service;\r\n\r\n      function configureModals(modals) {\r\n        var _ret = {};\r\n        angular.forEach(modals, function(modal) {\r\n          _ret[modal.modal] = function(obj) {\r\n            var config = {\r\n              controllerAs: 'vm',\r\n              resolve: {\r\n                ModalParams: function() {\r\n                  return obj || {};\r\n                }\r\n              }\r\n            };\r\n            angular.extend(config, modal.config);\r\n\r\n            return $uibModal\r\n              .open(config)\r\n              .result\r\n              .then(ModalResultComplete)\r\n              .catch(ModalResultFailed);\r\n\r\n            function ModalResultComplete(response) {\r\n              return response;\r\n            }\r\n\r\n            function ModalResultFailed(reason) {\r\n              if (reason && reason !== \"backdrop click\") {\r\n                return $q.reject();\r\n              }\r\n            }\r\n          };\r\n        });\r\n        return _ret;\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .provider('configHelper', configHelperProvider);\r\n\r\n  configHelperProvider.$inject = [];\r\n\r\n  function configHelperProvider() {\r\n    /* jshint validthis:true */\r\n    this.$get = ConfigHelper;\r\n\r\n    // $locationProvider.html5Mode(true);\r\n\r\n    ConfigHelper.$inject = [];\r\n\r\n    function ConfigHelper() {\r\n\r\n      var service = {\r\n        notifyConfig: notifyConfig\r\n      };\r\n\r\n      return service;\r\n\r\n      //function notifyConfig() {}\r\n      function notifyConfig(configName, message) {\r\n        message = message || {};\r\n        console.log(\"%c CONFIG - \" + configName + \" \", 'background: #9C27B0; color: #FFF', message);\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('numberFixedLen', numberFixedLen)\r\n\r\n  numberFixedLen.$inject = []\r\n\r\n  function numberFixedLen() {\r\n    return function(a, b) {\r\n      return (1e4 + a + \"\").slice(-b)\r\n    }\r\n  }\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('fromNow', fromNow)\r\n\r\n  fromNow.$inject = []\r\n\r\n  function fromNow() {\r\n    return function(date) {\r\n      return moment(date).fromNow();\r\n    }\r\n  }\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('fileicon', fileicon)\r\n\r\n  fileicon.$inject = []\r\n\r\n  function fileicon() {\r\n    var _icons = {\r\n      \"application/pdf\": \"fa-file-pdf-o\",\r\n      \"application/powerpoint\": \"fa-file-powerpoint-o\",\r\n      \"application/x-msword\": \"fa-file-word-o\",\r\n      \"application/x-msexcel\": \"fa-file-excel-o\",\r\n      \"application/x-mspowerpoint\": \"fa-file-powerpoint-o\",\r\n      \"audio/x-mpeg-3\": \"fa-file-audio-o\",\r\n      \"image/gif\": \"fa-file-image-o\",\r\n      \"image/png\": \"fa-file-image-o\",\r\n      \"image/tiff\": \"fa-file-image-o\",\r\n      \"image/jpeg\": \"fa-file-image-o\",\r\n      \"video/avi\": \"fa-file-video-o\",\r\n      \"video/mpeg\": \"fa-file-video-o\",\r\n      \"video/msvideo\": \"fa-file-video-o\",\r\n      \"video/quicktime\": \"fa-file-video-o\",\r\n      \"application/zip\": \"fa-file-zip-o\"\r\n    };\r\n    return function(a) {\r\n      return _icons[a] || \"fa-file-o\";\r\n    }\r\n  }\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .filter('bytes', bytes)\r\n\r\n  bytes.$inject = []\r\n\r\n  function bytes() {\r\n    return function(bytes, precision) {\r\n      if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) return '-';\r\n      if (typeof precision === 'undefined') precision = 1;\r\n      var units = ['bytes', 'kB', 'MB', 'GB', 'TB', 'PB'],\r\n        number = Math.floor(Math.log(bytes) / Math.log(1024));\r\n      return (bytes / Math.pow(1024, Math.floor(number))).toFixed(precision) + ' ' + units[number];\r\n    }\r\n  }\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('ngPrint', ngPrint)\r\n\r\n  ngPrint.$inject = []\r\n\r\n  function ngPrint() {\r\n    var printSection = document.getElementById('printSection');\r\n    // if there is no printing section, create one\r\n    if (!printSection) {\r\n      printSection = document.createElement('div');\r\n      printSection.id = 'printSection';\r\n      document.body.appendChild(printSection);\r\n    }\r\n\r\n    function link(scope, element, attrs) {\r\n\r\n      element.on('click', function() {\r\n        var elemToPrint = document.getElementById(attrs.printElementId);\r\n        if (elemToPrint) {\r\n          printElement(elemToPrint);\r\n        }\r\n      });\r\n\r\n      var beforePrint = function() {\r\n        console.log('Functionality to run before printing.');\r\n      };\r\n      var afterPrint = function() {\r\n        console.log('Functionality to run after printing');\r\n          printSection.innerHTML = '';\r\n      };\r\n\r\n      if (window.matchMedia) {\r\n        var mediaQueryList = window.matchMedia('print');\r\n        mediaQueryList.addListener(function(mql) {\r\n          if (mql.matches) {\r\n            beforePrint();\r\n          } else {\r\n            afterPrint();\r\n          }\r\n        });\r\n      }\r\n\r\n      window.onbeforeprint = beforePrint;\r\n      window.onafterprint = afterPrint;\r\n\r\n    }\r\n\r\n    function printElement(elem) {\r\n      // clones the element you want to print\r\n      var domClone = elem.cloneNode(true);\r\n      printSection.appendChild(domClone);\r\n      window.print();\r\n    }\r\n    return {\r\n      link: link,\r\n      restrict: 'A'\r\n    };\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .directive('errSrc', errSrc)\r\n\r\n  errSrc.$inject = []\r\n\r\n  function errSrc() {\r\n    return {\r\n      link: function(scope, element, attrs) {\r\n        if(!attrs.ngSrc){\r\n          attrs.$set('src', attrs.errSrc);\r\n        }\r\n\r\n        element.bind('error', function() {\r\n\r\n          if (attrs.errSrc == \"REMOVE\") {\r\n            element.remove();\r\n            return;\r\n          }\r\n          if (attrs.src != attrs.errSrc) {\r\n            attrs.$set('src', attrs.errSrc);\r\n          }\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .run(PermissionsConfig);\r\n\r\n  /* @ngInject */\r\n  function PermissionsConfig(configHelper, Permission, AuthService) {\r\n\r\n    Permission.defineRole('Anonymous', function() {\r\n      return !AuthService.AuthObj;\r\n    });\r\n\r\n    configHelper.notifyConfig(\"Permissions\", \"Loaded\");\r\n\r\n  }\r\n  PermissionsConfig.$inject = [\"configHelper\", \"Permission\", \"AuthService\"];\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig(configHelperProvider, $locationProvider) {\r\n    $locationProvider.html5Mode(true);\r\n\r\n    configHelperProvider.$get().notifyConfig(\"Location HTML5\", true);\r\n  }\r\n  LocationConfig.$inject = [\"configHelperProvider\", \"$locationProvider\"];\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig($httpProvider) {\r\n    $httpProvider.defaults.withCredentials = true;\r\n  }\r\n  LocationConfig.$inject = [\"$httpProvider\"];\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(AnalyticsConfig);\r\n\r\n  /* @ngInject */\r\n  function AnalyticsConfig(configHelperProvider, AnalyticsProvider) {\r\n\r\n    var GoogleTrackCode = \"UA-4623228-21\";\r\n\r\n    AnalyticsProvider.setAccount(GoogleTrackCode);\r\n\r\n    AnalyticsProvider.trackUrlParams(true);\r\n    AnalyticsProvider.ignoreFirstPageLoad(true);\r\n    AnalyticsProvider.setPageEvent('$stateChangeSuccess');\r\n\r\n    configHelperProvider.$get().notifyConfig(\"Google Analytics\", GoogleTrackCode);\r\n\r\n  }\r\n  AnalyticsConfig.$inject = [\"configHelperProvider\", \"AnalyticsProvider\"];\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings', []);\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .controller('SettingsController', SettingsController);\r\n\r\n  /* @ngInject */\r\n  function SettingsController(SettingsService, toaster) {\r\n    var vm = this;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n    }\r\n\r\n\r\n  }\r\n  SettingsController.$inject = [\"SettingsService\", \"toaster\"];\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants', []);\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .controller('ParticipantsController', ParticipantsController);\r\n\r\n  /* @ngInject */\r\n  function ParticipantsController(ParticipantsService, ParticipantsModals, toaster, $state) {\r\n    var vm = this;\r\n\r\n    vm.AddPList = AddPList;\r\n    vm.ViewPList = ViewPList;\r\n    vm.DeletePList = DeletePList;\r\n    vm.LoadPLists = LoadPLists;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadPLists();\r\n    }\r\n\r\n    function LoadPLists() {\r\n      vm.loading = true;\r\n      ParticipantsService\r\n        .GetPLists()\r\n        .then(function(data) {\r\n          vm.PLists = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function AddPList() {\r\n      ParticipantsModals\r\n        .PListForm()\r\n        .then(function() {\r\n          vm.LoadPLists();\r\n        });\r\n    }\r\n\r\n    function ViewPList(PList) {\r\n      ParticipantsModals\r\n        .PListForm({\r\n          ID: PList._id\r\n        })\r\n        .then(function() {\r\n          vm.LoadPLists();\r\n        });\r\n    }\r\n\r\n    function DeletePList(PList) {\r\n      ParticipantsService\r\n        .DeletePList(PList)\r\n        .then(function() {\r\n          vm.LoadPLists();\r\n        });\r\n    }\r\n\r\n  }\r\n  ParticipantsController.$inject = [\"ParticipantsService\", \"ParticipantsModals\", \"toaster\", \"$state\"];\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .controller(\"PListFormController\", PListFormController);\r\n\r\n  /* @ngInject */\r\n  function PListFormController($modalInstance, ModalParams, ParticipantsService) {\r\n    var vm = this;\r\n\r\n    vm.PList = {\r\n      Participants: [],\r\n    };\r\n\r\n    vm.AddParticipants = AddParticipants;\r\n    vm.RemoveParticipant = RemoveParticipant;\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      if (ModalParams.ID) {\r\n        vm.loading = true;\r\n        ParticipantsService\r\n          .GetPList(ModalParams.ID)\r\n          .then(function(data) {\r\n            vm.PList = data;\r\n            if (vm.PList.Participants.length === 0) {\r\n              vm.AddParticipants();\r\n            }\r\n          })\r\n          .finally(function() {\r\n            vm.loading = false;\r\n          });\r\n      } else {\r\n        vm.AddParticipants();\r\n      }\r\n    }\r\n\r\n    function AddParticipants() {\r\n      for (var i = 0; i < 5; i++) {\r\n        vm.PList.Participants.push({});\r\n      }\r\n    }\r\n\r\n    function RemoveParticipant(index) {\r\n      vm.PList.Participants.splice(index, 1);\r\n    }\r\n\r\n    function Save() {\r\n      ParticipantsService\r\n        .SavePList(vm.PList)\r\n        .then(function() {\r\n          $modalInstance.close();\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n  PListFormController.$inject = [\"$modalInstance\", \"ModalParams\", \"ParticipantsService\"];\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries', []);\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .controller('LotteriesController', LotteriesController);\r\n\r\n  /* @ngInject */\r\n  function LotteriesController(LotteriesService, LotteriesModals, toaster, $state) {\r\n    var vm = this;\r\n\r\n    vm.AddLottery = AddLottery;\r\n    vm.DeleteLottery = DeleteLottery;\r\n    vm.LoadLotteries = LoadLotteries;\r\n    vm.FetchPrevious = FetchPrevious;\r\n    vm.FetchNext = FetchNext;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadLotteries()\r\n        .then(function() {\r\n          vm.HasPages = LotteriesService.HasPages();\r\n        });\r\n    }\r\n\r\n    function FetchPrevious() {\r\n      if (vm.HasPages.Previous) {\r\n        LotteriesService.PreviousPage();\r\n        vm.HasPages = LotteriesService.HasPages();\r\n        vm.LoadLotteries();\r\n      }\r\n    }\r\n\r\n    function FetchNext() {\r\n      if (vm.HasPages.Next) {\r\n        LotteriesService.NextPage();\r\n        vm.HasPages = LotteriesService.HasPages();\r\n        vm.LoadLotteries();\r\n      }\r\n    }\r\n\r\n    function LoadLotteries() {\r\n      vm.loading = true;\r\n      return LotteriesService\r\n        .GetLotteries()\r\n        .then(function(data) {\r\n          vm.Lotteries = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function AddLottery() {\r\n      LotteriesModals\r\n        .LotteryInit()\r\n        .then(function(id) {\r\n          if (id) {\r\n            $state.go(\"app.lotteries.lottery\", {\r\n              ID: id\r\n            });\r\n          }\r\n        });\r\n    }\r\n\r\n    function DeleteLottery(lottery) {\r\n      LotteriesService\r\n        .DeleteLottery(lottery)\r\n        .then(function() {\r\n          vm.LoadLotteries();\r\n        });\r\n    }\r\n\r\n  }\r\n  LotteriesController.$inject = [\"LotteriesService\", \"LotteriesModals\", \"toaster\", \"$state\"];\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .controller('LotteryController', LotteryController);\r\n\r\n  /* @ngInject */\r\n  function LotteryController(LotteriesService, $stateParams, toaster) {\r\n    var vm = this;\r\n\r\n    vm.LoadLottery = LoadLottery;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadLottery();\r\n    }\r\n\r\n    function LoadLottery() {\r\n      vm.loading = true;\r\n      LotteriesService\r\n        .GetLottery($stateParams.ID)\r\n        .then(function(data) {\r\n          vm.Lottery = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n  }\r\n  LotteryController.$inject = [\"LotteriesService\", \"$stateParams\", \"toaster\"];\r\n})();\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .controller(\"LotteryInitController\", LotteryInitController);\r\n\r\n  /* @ngInject */\r\n  function LotteryInitController($modalInstance, ModalParams, LotteriesService,ParticipantsService) {\r\n    var vm = this;\r\n\r\n    vm.Lottery = {\r\n      Name: \"Lottery #\" + Math.floor((Math.random() * 99999) + 10000),\r\n    };\r\n\r\n    vm.LoadPLists = LoadPLists;\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadPLists();\r\n    }\r\n\r\n    function LoadPLists() {\r\n      vm.loading = true;\r\n      ParticipantsService\r\n        .GetPLists()\r\n        .then(function(data) {\r\n          vm.PLists = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function Save() {\r\n      LotteriesService\r\n        .SaveLottery(vm.Lottery)\r\n        .then(function(resp) {\r\n          $modalInstance.close(resp.id);\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n  LotteryInitController.$inject = [\"$modalInstance\", \"ModalParams\", \"LotteriesService\", \"ParticipantsService\"];\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth', [])\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .controller('AuthLoginController', AuthLoginController);\r\n\r\n  /* @ngInject */\r\n  function AuthLoginController(AuthService, $stateParams, $state, LoginMessages) {\r\n    var vm = this;\r\n\r\n    vm.loading = false;\r\n    vm.SignIn = SignIn;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n\r\n      switch ($stateParams.ref) {\r\n        case \"au\": //Unauthorized\r\n          vm.Alert = LoginMessages.UNAUTHORIZED;\r\n          break;\r\n        case \"so\": //Sign Out\r\n          vm.Alert = LoginMessages.SIGNOUT;\r\n          break;\r\n        case \"re\": //registered\r\n          vm.Alert = LoginMessages.REGISTERED;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n    }\r\n\r\n    function SignIn() {\r\n\r\n      vm.loading = true;\r\n      vm.Alert = false;\r\n\r\n      AuthService\r\n        .SignIn(vm.credentials)\r\n        .then(function(response) {\r\n          $state.go(\"app.lotteries.overview\");\r\n        }, function(rejection) {\r\n          console.log(rejection);\r\n          vm.Alert = LoginMessages[rejection.error.toUpperCase()];\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n  }\r\n  AuthLoginController.$inject = [\"AuthService\", \"$stateParams\", \"$state\", \"LoginMessages\"];\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .run(RoutesConfig);\r\n\r\n  RoutesConfig.$inject = ['configHelper', 'routerHelper'];\r\n\r\n  function RoutesConfig(configHelper, routerHelper) {\r\n\r\n    var _states = getStates();\r\n    routerHelper.configureStates(_states, \"/\");\r\n\r\n    configHelper.notifyConfig(\"Basic Routes\", _.map(_states, function(_state) {\r\n      return _state.state;\r\n    }));\r\n\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app',\r\n      config: {\r\n        abstract: true,\r\n        templateUrl: 'src/_common/views/layout.html',\r\n        controller: function($scope, AuthService) {\r\n          $scope.username = AuthService.AuthObj.username;\r\n        }\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .factory('SettingsService', SettingsService);\r\n\r\n  /* @ngInject */\r\n  function SettingsService($resource) {\r\n\r\n    var service = {\r\n      GetSettings: GetSettings,\r\n      GetSetting: GetSetting,\r\n      SaveSetting: SaveSetting,\r\n      DeleteSetting: DeleteSetting,\r\n    }\r\n\r\n    return service;\r\n\r\n    function GetSettings(params) {\r\n      return $resource(APP.Service + \"_design/models/_view/Settings\")\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.DrewAt || 0;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n    function GetSetting(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function SaveSetting(Setting) {\r\n      Setting.Type = \"Setting\";\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeleteSetting(Setting) {\r\n\r\n      Setting._deleted = true;\r\n      Setting.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n  SettingsService.$inject = [\"$resource\"];\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.settings',\r\n      config: {\r\n        url: '/settings',\r\n        controller: \"SettingsController\",\r\n        templateUrl: 'src/settings/overview/view.html',\r\n        data: {\r\n          permissions: {\r\n            except: ['Anonymous'],\r\n            redirectTo: \"auth.login\"\r\n          }\r\n        }\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .factory('ParticipantsService', ParticipantsService);\r\n\r\n  /* @ngInject */\r\n  function ParticipantsService($resource) {\r\n\r\n    var service = {\r\n      GetPLists: GetPLists,\r\n      GetPList: GetPList,\r\n      SavePList: SavePList,\r\n      DeletePList: DeletePList,\r\n    }\r\n\r\n    return service;\r\n\r\n    function GetPLists(params) {\r\n      return $resource(APP.Service + \"_design/models/_view/plists\")\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.Name;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n    function GetPList(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n\r\n    function SavePList(PList) {\r\n\r\n      if (!PList._id) {\r\n        PList.Type = \"PList\";\r\n        PList.CreatedAt = new Date();\r\n      }\r\n\r\n      PList.Participants = _.filter(PList.Participants, function(item) {\r\n        return (item.Name || item.Email);\r\n      });\r\n\r\n      return $resource(APP.Service)\r\n        .save(PList)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeletePList(PList) {\r\n\r\n      PList._deleted = true;\r\n      PList.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(PList)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n  ParticipantsService.$inject = [\"$resource\"];\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.participants',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n        data: {\r\n          permissions: {\r\n            except: ['Anonymous'],\r\n            redirectTo: \"auth.login\"\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      state: 'app.participants.overview',\r\n      config: {\r\n        url: '/participants',\r\n        controller: \"ParticipantsController\",\r\n        templateUrl: 'src/participants/overview/view.html',\r\n      }\r\n    }, {\r\n      state: 'app.participants.item',\r\n      config: {\r\n        url: '/participant/:ID',\r\n        controller: \"ParticipantController\",\r\n        templateUrl: 'src/participants/item/view.html',\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .factory('ParticipantsModals', ParticipantsModals);\r\n\r\n  ParticipantsModals.$inject = ['modalHelper'];\r\n\r\n  function ParticipantsModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"PListForm\",\r\n        config: {\r\n          templateUrl: 'src/participants/form/view.html',\r\n          controller: \"PListFormController\",\r\n          size: \"md\",\r\n          backdrop: 'static',\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .factory('LotteriesService', LotteriesService);\r\n\r\n  /* @ngInject */\r\n  function LotteriesService($resource) {\r\n\r\n    var service = {\r\n      _total: null,\r\n      _limit: 10,\r\n      _offset: 0,\r\n      GetLotteries: GetLotteries,\r\n      GetLottery: GetLottery,\r\n      SaveLottery: SaveLottery,\r\n      DeleteLottery: DeleteLottery,\r\n      NextPage: NextPage,\r\n      PreviousPage: PreviousPage,\r\n      HasPages: HasPages,\r\n    }\r\n\r\n    return service;\r\n\r\n    function NextPage() {\r\n      service._offset = ((service._offset / service._limit) + 1) * service._limit;\r\n    }\r\n\r\n    function PreviousPage() {\r\n      service._offset = ((service._offset / service._limit) - 1) * service._limit;\r\n    }\r\n\r\n    function HasPages() {\r\n      return {\r\n        Previous: (service._offset !== 0),\r\n        Next: (service._total - service._offset > service._limit),\r\n      }\r\n    }\r\n\r\n    function GetLotteries() {\r\n\r\n      return $resource(APP.Service + \"_design/models/_view/lotteries\")\r\n        .get({\r\n          limit: service._limit,\r\n          skip: service._offset,\r\n        })\r\n        .$promise\r\n        .then(function(data) {\r\n          service._total = data.total_rows;\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.DrewAt || 0;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n\r\n    function GetLottery(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function SaveLottery(lottery) {\r\n\r\n      lottery.Type = \"Lottery\";\r\n      lottery.DrewAt = new Date();\r\n      lottery.Participants = _.shuffle(lottery.Participants);\r\n\r\n      return $resource(APP.Service)\r\n        .save(lottery)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeleteLottery(lottery) {\r\n\r\n      lottery._deleted = true;\r\n      lottery.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(lottery)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n  LotteriesService.$inject = [\"$resource\"];\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.lotteries',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n        data: {\r\n          permissions: {\r\n            except: ['Anonymous'],\r\n            redirectTo: \"auth.login\"\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      state: 'app.lotteries.overview',\r\n      config: {\r\n        url: '/',\r\n        controller: \"LotteriesController\",\r\n        templateUrl: 'src/lotteries/overview/view.html',\r\n      }\r\n    }, {\r\n      state: 'app.lotteries.lottery',\r\n      config: {\r\n        url: '/lottery/:ID',\r\n        controller: \"LotteryController\",\r\n        templateUrl: 'src/lotteries/lottery/view.html',\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .factory('LotteriesModals', LotteriesModals);\r\n\r\n  LotteriesModals.$inject = ['modalHelper'];\r\n\r\n  function LotteriesModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"LotteryInit\",\r\n        config: {\r\n          templateUrl: 'src/lotteries/init/view.html',\r\n          controller: \"LotteryInitController\",\r\n          size: \"sm\"\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.auth')\n    .factory('AuthService', AuthService);\n\n  /* @ngInject */\n  function AuthService($http, $q, $cookies) {\n    var service = {\n      AuthObj: false,\n\n      Init: Init,\n      SignIn: SignIn,\n      SignOut: SignOut,\n    }\n\n    return service;\n\n    function Init() {\n\n      var AuthObj = $cookies.getObject('AuthObj');\n      if (AuthObj) {\n        service.isAuth = true;\n        service.AuthObj = AuthObj;\n      }\n\n    }\n\n    function SignIn(credentials) {\n\n      var deferred = $q.defer();\n\n      $http\n        .post(APP.CouchServer + '_session', {\n          name: credentials.username,\n          password: credentials.password,\n        }, {\n          IsSignIn: true\n        })\n        .then(function(response) {\n          var AuthObj = {\n            username: credentials.username\n          }\n          $cookies.putObject('AuthObj', AuthObj);\n          service.AuthObj = AuthObj;\n          deferred.resolve();\n        }, function(rejection) {\n          deferred.reject(rejection.data);\n        });\n\n      return deferred.promise;\n    }\n\n    function SignOut() {\n      $cookies.remove('AuthObj');\n      $http.delete(APP.CouchServer + '_session');\n      service.AuthObj = false;\n    }\n\n  }\r\n  AuthService.$inject = [\"$http\", \"$q\", \"$cookies\"];\n\n}());\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'auth',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n      }\r\n    }, {\r\n      state: 'auth.login',\r\n      config: {\r\n        url: '/login',\r\n        params: {\r\n          ref: null\r\n        },\r\n        templateUrl: \"src/auth/login/view.html\",\r\n        controller: \"AuthLoginController\",\r\n        data: {\r\n          permissions: {\r\n            only: ['Anonymous'],\r\n            redirectTo: \"app.lotteries.overview\"\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      state: 'auth.logout',\r\n      config: {\r\n        url: '/logout',\r\n        template: \"<ui-view/>\",\r\n        controller: function(AuthService, $state) {\r\n          AuthService.SignOut();\r\n          $state.go(\"auth.login\", {\r\n            ref: \"so\"\r\n          });\r\n        },\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .config(AuthInterceptorConfig)\r\n    .factory('AuthInterceptor', AuthInterceptor);\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptor($q, $injector,$cookies) {\r\n\r\n    return {\r\n      responseError: function(rejection) {\r\n        // console.log(rejection);\r\n        if (rejection.status === 401 && !rejection.config.IsSignIn) {\r\n          var AuthService = $injector.get('AuthService');\r\n          AuthService.SignOut();\r\n          var $state = $injector.get('$state');\r\n          $state.go('auth.login', {\r\n            ref: \"au\"\r\n          });\r\n        }\r\n        return $q.reject(rejection);\r\n      }\r\n    };\r\n\r\n  }\r\n  AuthInterceptor.$inject = [\"$q\", \"$injector\", \"$cookies\"];\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptorConfig($httpProvider) {\r\n    $httpProvider.interceptors.push(\"AuthInterceptor\");\r\n  }\r\n  AuthInterceptorConfig.$inject = [\"$httpProvider\"];\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .constant('LoginMessages', {\r\n      ANAUTHORIZED: {\r\n        Type: \"danger\",\r\n        Message: \"You were signed out\",\r\n        Details: \"Probably your session was timed out\",\r\n      },\r\n      SIGNOUT: {\r\n        Type: \"success\",\r\n        Message: \"You were signed out successfully\",\r\n        Details: \"You may login again using the form\",\r\n      },\r\n      REGISTERED: {\r\n        Type: \"success\",\r\n        Message: \"Your account is ready, you can login now\",\r\n        Details: false,\r\n      },\r\n      AUTHERROR: {\r\n        Type: \"danger\",\r\n        Message: \"Authentication Error\",\r\n        Details: null,\r\n      },\r\n      UNAVAILABLE: {\r\n        Type: \"danger\",\r\n        Message: \"Service is not available\",\r\n        Details: \"Please try again later. If the problem insist, contact your system administrator\",\r\n      },\r\n      UNAUTHORIZED: {\r\n        Type: \"danger\",\r\n        Message: \"Name or password is incorrect\",\r\n        Details: \"Please try again\",\r\n      },\r\n    });\r\n\r\n}());\r\n;(function() {\r\n  'use strict';\r\n\r\n  angular.module('app', [\r\n\r\n    'app.auth',\r\n    'app.lotteries',\r\n    'app.participants',\r\n    'app.settings',\r\n    'app._common',\r\n\r\n\r\n  ]);\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .run(appRun);\r\n\r\n  /* @ngInject */\r\n  function appRun($rootScope, $state, $stateParams, AuthService) {\r\n\r\n    AuthService.Init();\r\n\r\n    $rootScope.APP = APP;\r\n\r\n    $rootScope.$on('$stateChangeStart', function(evt, to, params) {\r\n\r\n      if (to.redirectTo) {\r\n        evt.preventDefault();\r\n        $state.go(to.redirectTo, params);\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n  appRun.$inject = [\"$rootScope\", \"$state\", \"$stateParams\", \"AuthService\"];\r\n\r\n}());\r\n;/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  var _domain = window.location.hostname.split(\".\").shift();\r\n  window.APP = {\r\n    Project: \"PicoLotteries\",\r\n    Version: \"0.1.5\",\r\n    Domain: _domain,\r\n    CouchServer: \"//localhost:5984/\",\r\n    Database: \"picolottery_\" + _domain,\r\n  };\r\n  window.APP.Service = window.APP.CouchServer + window.APP.Database + \"/\";\r\n\r\n  angular.element(document).ready(function() {\r\n    angular.bootstrap(document, [\"app\"]);\r\n  });\r\n\r\n})();\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig(configHelperProvider, $locationProvider) {\r\n    $locationProvider.html5Mode(true);\r\n\r\n    configHelperProvider.$get().notifyConfig(\"Location HTML5\", true);\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(LocationConfig);\r\n\r\n  /* @ngInject */\r\n  function LocationConfig($httpProvider) {\r\n    $httpProvider.defaults.withCredentials = true;\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .config(AnalyticsConfig);\r\n\r\n  /* @ngInject */\r\n  function AnalyticsConfig(configHelperProvider, AnalyticsProvider) {\r\n\r\n    var GoogleTrackCode = \"UA-4623228-21\";\r\n\r\n    AnalyticsProvider.setAccount(GoogleTrackCode);\r\n\r\n    AnalyticsProvider.trackUrlParams(true);\r\n    AnalyticsProvider.ignoreFirstPageLoad(true);\r\n    AnalyticsProvider.setPageEvent('$stateChangeSuccess');\r\n\r\n    configHelperProvider.$get().notifyConfig(\"Google Analytics\", GoogleTrackCode);\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings', []);\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .controller('SettingsController', SettingsController);\r\n\r\n  /* @ngInject */\r\n  function SettingsController(SettingsService, toaster) {\r\n    var vm = this;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n    }\r\n\r\n\r\n  }\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants', []);\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .controller('ParticipantsController', ParticipantsController);\r\n\r\n  /* @ngInject */\r\n  function ParticipantsController(ParticipantsService, ParticipantsModals, toaster, $state) {\r\n    var vm = this;\r\n\r\n    vm.AddPList = AddPList;\r\n    vm.ViewPList = ViewPList;\r\n    vm.DeletePList = DeletePList;\r\n    vm.LoadPLists = LoadPLists;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadPLists();\r\n    }\r\n\r\n    function LoadPLists() {\r\n      vm.loading = true;\r\n      ParticipantsService\r\n        .GetPLists()\r\n        .then(function(data) {\r\n          vm.PLists = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function AddPList() {\r\n      ParticipantsModals\r\n        .PListForm()\r\n        .then(function() {\r\n          vm.LoadPLists();\r\n        });\r\n    }\r\n\r\n    function ViewPList(PList) {\r\n      ParticipantsModals\r\n        .PListForm({\r\n          ID: PList._id\r\n        })\r\n        .then(function() {\r\n          vm.LoadPLists();\r\n        });\r\n    }\r\n\r\n    function DeletePList(PList) {\r\n      ParticipantsService\r\n        .DeletePList(PList)\r\n        .then(function() {\r\n          vm.LoadPLists();\r\n        });\r\n    }\r\n\r\n  }\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .controller(\"PListFormController\", PListFormController);\r\n\r\n  /* @ngInject */\r\n  function PListFormController($modalInstance, ModalParams, ParticipantsService) {\r\n    var vm = this;\r\n\r\n    vm.PList = {\r\n      Participants: [],\r\n    };\r\n\r\n    vm.AddParticipants = AddParticipants;\r\n    vm.RemoveParticipant = RemoveParticipant;\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      if (ModalParams.ID) {\r\n        vm.loading = true;\r\n        ParticipantsService\r\n          .GetPList(ModalParams.ID)\r\n          .then(function(data) {\r\n            vm.PList = data;\r\n            if (vm.PList.Participants.length === 0) {\r\n              vm.AddParticipants();\r\n            }\r\n          })\r\n          .finally(function() {\r\n            vm.loading = false;\r\n          });\r\n      } else {\r\n        vm.AddParticipants();\r\n      }\r\n    }\r\n\r\n    function AddParticipants() {\r\n      for (var i = 0; i < 5; i++) {\r\n        vm.PList.Participants.push({});\r\n      }\r\n    }\r\n\r\n    function RemoveParticipant(index) {\r\n      vm.PList.Participants.splice(index, 1);\r\n    }\r\n\r\n    function Save() {\r\n      ParticipantsService\r\n        .SavePList(vm.PList)\r\n        .then(function() {\r\n          $modalInstance.close();\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries', []);\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .controller('LotteriesController', LotteriesController);\r\n\r\n  /* @ngInject */\r\n  function LotteriesController(LotteriesService, LotteriesModals, toaster, $state) {\r\n    var vm = this;\r\n\r\n    vm.AddLottery = AddLottery;\r\n    vm.DeleteLottery = DeleteLottery;\r\n    vm.LoadLotteries = LoadLotteries;\r\n    vm.FetchPrevious = FetchPrevious;\r\n    vm.FetchNext = FetchNext;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadLotteries()\r\n        .then(function() {\r\n          vm.HasPages = LotteriesService.HasPages();\r\n        });\r\n    }\r\n\r\n    function FetchPrevious() {\r\n      if (vm.HasPages.Previous) {\r\n        LotteriesService.PreviousPage();\r\n        vm.HasPages = LotteriesService.HasPages();\r\n        vm.LoadLotteries();\r\n      }\r\n    }\r\n\r\n    function FetchNext() {\r\n      if (vm.HasPages.Next) {\r\n        LotteriesService.NextPage();\r\n        vm.HasPages = LotteriesService.HasPages();\r\n        vm.LoadLotteries();\r\n      }\r\n    }\r\n\r\n    function LoadLotteries() {\r\n      vm.loading = true;\r\n      return LotteriesService\r\n        .GetLotteries()\r\n        .then(function(data) {\r\n          vm.Lotteries = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function AddLottery() {\r\n      LotteriesModals\r\n        .LotteryInit()\r\n        .then(function(id) {\r\n          if (id) {\r\n            $state.go(\"app.lotteries.lottery\", {\r\n              ID: id\r\n            });\r\n          }\r\n        });\r\n    }\r\n\r\n    function DeleteLottery(lottery) {\r\n      LotteriesService\r\n        .DeleteLottery(lottery)\r\n        .then(function() {\r\n          vm.LoadLotteries();\r\n        });\r\n    }\r\n\r\n  }\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .controller('LotteryController', LotteryController);\r\n\r\n  /* @ngInject */\r\n  function LotteryController(LotteriesService, $stateParams, toaster) {\r\n    var vm = this;\r\n\r\n    vm.LoadLottery = LoadLottery;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadLottery();\r\n    }\r\n\r\n    function LoadLottery() {\r\n      vm.loading = true;\r\n      LotteriesService\r\n        .GetLottery($stateParams.ID)\r\n        .then(function(data) {\r\n          vm.Lottery = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n  }\r\n})();\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .controller(\"LotteryInitController\", LotteryInitController);\r\n\r\n  /* @ngInject */\r\n  function LotteryInitController($modalInstance, ModalParams, LotteriesService,ParticipantsService) {\r\n    var vm = this;\r\n\r\n    vm.Lottery = {\r\n      Name: \"Lottery #\" + Math.floor((Math.random() * 99999) + 10000),\r\n    };\r\n\r\n    vm.LoadPLists = LoadPLists;\r\n    vm.Save = Save;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      vm.LoadPLists();\r\n    }\r\n\r\n    function LoadPLists() {\r\n      vm.loading = true;\r\n      ParticipantsService\r\n        .GetPLists()\r\n        .then(function(data) {\r\n          vm.PLists = data;\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n    function Save() {\r\n      LotteriesService\r\n        .SaveLottery(vm.Lottery)\r\n        .then(function(resp) {\r\n          $modalInstance.close(resp.id);\r\n        });\r\n    }\r\n\r\n\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth', [])\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .controller('AuthLoginController', AuthLoginController);\r\n\r\n  /* @ngInject */\r\n  function AuthLoginController(AuthService, $stateParams, $state, LoginMessages) {\r\n    var vm = this;\r\n\r\n    vm.loading = false;\r\n    vm.SignIn = SignIn;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n\r\n      switch ($stateParams.ref) {\r\n        case \"au\": //Unauthorized\r\n          vm.Alert = LoginMessages.UNAUTHORIZED;\r\n          break;\r\n        case \"so\": //Sign Out\r\n          vm.Alert = LoginMessages.SIGNOUT;\r\n          break;\r\n        case \"re\": //registered\r\n          vm.Alert = LoginMessages.REGISTERED;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n    }\r\n\r\n    function SignIn() {\r\n\r\n      vm.loading = true;\r\n      vm.Alert = false;\r\n\r\n      AuthService\r\n        .SignIn(vm.credentials)\r\n        .then(function(response) {\r\n          $state.go(\"app.lotteries.overview\");\r\n        }, function(rejection) {\r\n          console.log(rejection);\r\n          vm.Alert = LoginMessages[rejection.error.toUpperCase()];\r\n        })\r\n        .finally(function() {\r\n          vm.loading = false;\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app._common')\r\n    .run(RoutesConfig);\r\n\r\n  RoutesConfig.$inject = ['configHelper', 'routerHelper'];\r\n\r\n  function RoutesConfig(configHelper, routerHelper) {\r\n\r\n    var _states = getStates();\r\n    routerHelper.configureStates(_states, \"/\");\r\n\r\n    configHelper.notifyConfig(\"Basic Routes\", _.map(_states, function(_state) {\r\n      return _state.state;\r\n    }));\r\n\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app',\r\n      config: {\r\n        abstract: true,\r\n        templateUrl: 'src/_common/views/layout.html',\r\n        controller: function($scope, AuthService) {\r\n          $scope.username = AuthService.AuthObj.username;\r\n        }\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .factory('SettingsService', SettingsService);\r\n\r\n  /* @ngInject */\r\n  function SettingsService($resource) {\r\n\r\n    var service = {\r\n      GetSettings: GetSettings,\r\n      GetSetting: GetSetting,\r\n      SaveSetting: SaveSetting,\r\n      DeleteSetting: DeleteSetting,\r\n    }\r\n\r\n    return service;\r\n\r\n    function GetSettings(params) {\r\n      return $resource(APP.Service + \"_design/models/_view/Settings\")\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.DrewAt || 0;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n    function GetSetting(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function SaveSetting(Setting) {\r\n      Setting.Type = \"Setting\";\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeleteSetting(Setting) {\r\n\r\n      Setting._deleted = true;\r\n      Setting.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(Setting)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.settings')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.settings',\r\n      config: {\r\n        url: '/settings',\r\n        controller: \"SettingsController\",\r\n        templateUrl: 'src/settings/overview/view.html',\r\n        data: {\r\n          permissions: {\r\n            except: ['Anonymous'],\r\n            redirectTo: \"auth.login\"\r\n          }\r\n        }\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .factory('ParticipantsService', ParticipantsService);\r\n\r\n  /* @ngInject */\r\n  function ParticipantsService($resource) {\r\n\r\n    var service = {\r\n      GetPLists: GetPLists,\r\n      GetPList: GetPList,\r\n      SavePList: SavePList,\r\n      DeletePList: DeletePList,\r\n    }\r\n\r\n    return service;\r\n\r\n    function GetPLists(params) {\r\n      return $resource(APP.Service + \"_design/models/_view/plists\")\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.Name;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n    function GetPList(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n\r\n    function SavePList(PList) {\r\n\r\n      if (!PList._id) {\r\n        PList.Type = \"PList\";\r\n        PList.CreatedAt = new Date();\r\n      }\r\n\r\n      PList.Participants = _.filter(PList.Participants, function(item) {\r\n        return (item.Name || item.Email);\r\n      });\r\n\r\n      return $resource(APP.Service)\r\n        .save(PList)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeletePList(PList) {\r\n\r\n      PList._deleted = true;\r\n      PList.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(PList)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.participants',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n        data: {\r\n          permissions: {\r\n            except: ['Anonymous'],\r\n            redirectTo: \"auth.login\"\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      state: 'app.participants.overview',\r\n      config: {\r\n        url: '/participants',\r\n        controller: \"ParticipantsController\",\r\n        templateUrl: 'src/participants/overview/view.html',\r\n      }\r\n    }, {\r\n      state: 'app.participants.item',\r\n      config: {\r\n        url: '/participant/:ID',\r\n        controller: \"ParticipantController\",\r\n        templateUrl: 'src/participants/item/view.html',\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.participants')\r\n    .factory('ParticipantsModals', ParticipantsModals);\r\n\r\n  ParticipantsModals.$inject = ['modalHelper'];\r\n\r\n  function ParticipantsModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"PListForm\",\r\n        config: {\r\n          templateUrl: 'src/participants/form/view.html',\r\n          controller: \"PListFormController\",\r\n          size: \"md\",\r\n          backdrop: 'static',\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .factory('LotteriesService', LotteriesService);\r\n\r\n  /* @ngInject */\r\n  function LotteriesService($resource) {\r\n\r\n    var service = {\r\n      _total: null,\r\n      _limit: 10,\r\n      _offset: 0,\r\n      GetLotteries: GetLotteries,\r\n      GetLottery: GetLottery,\r\n      SaveLottery: SaveLottery,\r\n      DeleteLottery: DeleteLottery,\r\n      NextPage: NextPage,\r\n      PreviousPage: PreviousPage,\r\n      HasPages: HasPages,\r\n    }\r\n\r\n    return service;\r\n\r\n    function NextPage() {\r\n      service._offset = ((service._offset / service._limit) + 1) * service._limit;\r\n    }\r\n\r\n    function PreviousPage() {\r\n      service._offset = ((service._offset / service._limit) - 1) * service._limit;\r\n    }\r\n\r\n    function HasPages() {\r\n      return {\r\n        Previous: (service._offset !== 0),\r\n        Next: (service._total - service._offset > service._limit),\r\n      }\r\n    }\r\n\r\n    function GetLotteries() {\r\n\r\n      return $resource(APP.Service + \"_design/models/_view/lotteries\")\r\n        .get({\r\n          limit: service._limit,\r\n          skip: service._offset,\r\n        })\r\n        .$promise\r\n        .then(function(data) {\r\n          service._total = data.total_rows;\r\n          return _.chain(data.rows)\r\n            .map(function(item) {\r\n              return item.value;\r\n            })\r\n            .sortBy(function(item) {\r\n              return item.DrewAt || 0;\r\n            })\r\n            .reverse()\r\n            .value();\r\n        });\r\n    }\r\n\r\n\r\n    function GetLottery(id) {\r\n      return $resource(APP.Service + id)\r\n        .get()\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function SaveLottery(lottery) {\r\n\r\n      lottery.Type = \"Lottery\";\r\n      lottery.DrewAt = new Date();\r\n      lottery.Participants = _.shuffle(lottery.Participants);\r\n\r\n      return $resource(APP.Service)\r\n        .save(lottery)\r\n        .$promise\r\n        .then(function(data) {\r\n          return data;\r\n        });\r\n    }\r\n\r\n    function DeleteLottery(lottery) {\r\n\r\n      lottery._deleted = true;\r\n      lottery.DeletedAt = new Date();\r\n\r\n      return $resource(APP.Service)\r\n        .save(lottery)\r\n        .$promise;\r\n    }\r\n\r\n  }\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'app.lotteries',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n        data: {\r\n          permissions: {\r\n            except: ['Anonymous'],\r\n            redirectTo: \"auth.login\"\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      state: 'app.lotteries.overview',\r\n      config: {\r\n        url: '/',\r\n        controller: \"LotteriesController\",\r\n        templateUrl: 'src/lotteries/overview/view.html',\r\n      }\r\n    }, {\r\n      state: 'app.lotteries.lottery',\r\n      config: {\r\n        url: '/lottery/:ID',\r\n        controller: \"LotteryController\",\r\n        templateUrl: 'src/lotteries/lottery/view.html',\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.lotteries')\r\n    .factory('LotteriesModals', LotteriesModals);\r\n\r\n  LotteriesModals.$inject = ['modalHelper'];\r\n\r\n  function LotteriesModals(modalHelper) {\r\n    return modalHelper.configureModals(getModals());\r\n\r\n    function getModals() {\r\n      return [{\r\n        modal: \"LotteryInit\",\r\n        config: {\r\n          templateUrl: 'src/lotteries/init/view.html',\r\n          controller: \"LotteryInitController\",\r\n          size: \"sm\"\r\n        }\r\n      }];\r\n    }\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\n(function() {\n  'use strict';\n\n  angular\n    .module('app.auth')\n    .factory('AuthService', AuthService);\n\n  /* @ngInject */\n  function AuthService($http, $q, $cookies) {\n    var service = {\n      AuthObj: false,\n\n      Init: Init,\n      SignIn: SignIn,\n      SignOut: SignOut,\n    }\n\n    return service;\n\n    function Init() {\n\n      var AuthObj = $cookies.getObject('AuthObj');\n      if (AuthObj) {\n        service.isAuth = true;\n        service.AuthObj = AuthObj;\n      }\n\n    }\n\n    function SignIn(credentials) {\n\n      var deferred = $q.defer();\n\n      $http\n        .post(APP.CouchServer + '_session', {\n          name: credentials.username,\n          password: credentials.password,\n        }, {\n          IsSignIn: true\n        })\n        .then(function(response) {\n          var AuthObj = {\n            username: credentials.username\n          }\n          $cookies.putObject('AuthObj', AuthObj);\n          service.AuthObj = AuthObj;\n          deferred.resolve();\n        }, function(rejection) {\n          deferred.reject(rejection.data);\n        });\n\n      return deferred.promise;\n    }\n\n    function SignOut() {\n      $cookies.remove('AuthObj');\n      $http.delete(APP.CouchServer + '_session');\n      service.AuthObj = false;\n    }\n\n  }\n\n}());\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .run(appRun);\r\n\r\n  appRun.$inject = ['routerHelper'];\r\n\r\n  function appRun(routerHelper) {\r\n    routerHelper.configureStates(getStates());\r\n  }\r\n\r\n  function getStates() {\r\n    return [{\r\n      state: 'auth',\r\n      config: {\r\n        abstract: true,\r\n        template: '<ui-view/>',\r\n      }\r\n    }, {\r\n      state: 'auth.login',\r\n      config: {\r\n        url: '/login',\r\n        params: {\r\n          ref: null\r\n        },\r\n        templateUrl: \"src/auth/login/view.html\",\r\n        controller: \"AuthLoginController\",\r\n        data: {\r\n          permissions: {\r\n            only: ['Anonymous'],\r\n            redirectTo: \"app.lotteries.overview\"\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      state: 'auth.logout',\r\n      config: {\r\n        url: '/logout',\r\n        template: \"<ui-view/>\",\r\n        controller: function(AuthService, $state) {\r\n          AuthService.SignOut();\r\n          $state.go(\"auth.login\", {\r\n            ref: \"so\"\r\n          });\r\n        },\r\n      }\r\n    }];\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .config(AuthInterceptorConfig)\r\n    .factory('AuthInterceptor', AuthInterceptor);\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptor($q, $injector,$cookies) {\r\n\r\n    return {\r\n      responseError: function(rejection) {\r\n        // console.log(rejection);\r\n        if (rejection.status === 401 && !rejection.config.IsSignIn) {\r\n          var AuthService = $injector.get('AuthService');\r\n          AuthService.SignOut();\r\n          var $state = $injector.get('$state');\r\n          $state.go('auth.login', {\r\n            ref: \"au\"\r\n          });\r\n        }\r\n        return $q.reject(rejection);\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n  /* @ngInject */\r\n  function AuthInterceptorConfig($httpProvider) {\r\n    $httpProvider.interceptors.push(\"AuthInterceptor\");\r\n  }\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.auth')\r\n    .constant('LoginMessages', {\r\n      ANAUTHORIZED: {\r\n        Type: \"danger\",\r\n        Message: \"You were signed out\",\r\n        Details: \"Probably your session was timed out\",\r\n      },\r\n      SIGNOUT: {\r\n        Type: \"success\",\r\n        Message: \"You were signed out successfully\",\r\n        Details: \"You may login again using the form\",\r\n      },\r\n      REGISTERED: {\r\n        Type: \"success\",\r\n        Message: \"Your account is ready, you can login now\",\r\n        Details: false,\r\n      },\r\n      AUTHERROR: {\r\n        Type: \"danger\",\r\n        Message: \"Authentication Error\",\r\n        Details: null,\r\n      },\r\n      UNAVAILABLE: {\r\n        Type: \"danger\",\r\n        Message: \"Service is not available\",\r\n        Details: \"Please try again later. If the problem insist, contact your system administrator\",\r\n      },\r\n      UNAUTHORIZED: {\r\n        Type: \"danger\",\r\n        Message: \"Name or password is incorrect\",\r\n        Details: \"Please try again\",\r\n      },\r\n    });\r\n\r\n}());\r\n","(function() {\r\n  'use strict';\r\n\r\n  angular.module('app', [\r\n\r\n    'app.auth',\r\n    'app.lotteries',\r\n    'app.participants',\r\n    'app.settings',\r\n    'app._common',\r\n\r\n\r\n  ]);\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .run(appRun);\r\n\r\n  /* @ngInject */\r\n  function appRun($rootScope, $state, $stateParams, AuthService) {\r\n\r\n    AuthService.Init();\r\n\r\n    $rootScope.APP = APP;\r\n\r\n    $rootScope.$on('$stateChangeStart', function(evt, to, params) {\r\n\r\n      if (to.redirectTo) {\r\n        evt.preventDefault();\r\n        $state.go(to.redirectTo, params);\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n\r\n}());\r\n","/* jshint -W097, -W033 */\r\n(function() {\r\n  'use strict';\r\n\r\n  var _domain = window.location.hostname.split(\".\").shift();\r\n  window.APP = {\r\n    Project: \"PicoLotteries\",\r\n    Version: \"0.1.5\",\r\n    Domain: _domain,\r\n    CouchServer: \"//localhost:5984/\",\r\n    Database: \"picolottery_\" + _domain,\r\n  };\r\n  window.APP.Service = window.APP.CouchServer + window.APP.Database + \"/\";\r\n\r\n  angular.element(document).ready(function() {\r\n    angular.bootstrap(document, [\"app\"]);\r\n  });\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}